<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
     
    <style>
        body {
            margin: 0;
           padding: 0;
           font-family: 'Space Grotesk', Helvetica, Arial, sans-serif;
           line-height: 1;
           background-color: rgb(235, 235, 235);
           position: relative;
           min-height: 100vh;
           overflow-x: hidden;
           display: flex;
           flex-direction: column;
           width: 100%;
        }
        
        /* Top banner - updated to match demo page style */
        .top-banner {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: rgb(241, 61, 33);
            padding: 4px 0; /* Match demo page padding */
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center; /* Match demo page */
        }
        
        .title-container {
            padding-left: 24px; /* Match demo page */
            flex-shrink: 0; /* Match demo page */
        }
        
        .top-banner h1 {
            font-size: 34px; /* Match demo page */
            font-weight: 500; /* Match demo page */
            color: rgb(23, 23, 23);
            margin: 0;
            letter-spacing: 0em;
            line-height: 1;
            font-family: 'Space Grotesk', Helvetica, Arial, sans-serif; /* Match demo page */
            white-space: nowrap; /* Match demo page */
        }
        
        /* Navigation - updated to match demo page style */
        .nav-top {
            display: flex;
            gap: 0; /* Match demo page */
            padding-right: 48px; /* Match demo page */
            padding-left: 32px; /* Match demo page */
            align-items: flex-end; /* Match demo page */
        }
        
        .nav-item {
            position: relative;
            cursor: pointer;
            padding: 4px 12px; /* Match demo page */
            display: flex;
            align-items: center; /* Match demo page */
            margin-top: -8px; /* Match demo page */
            margin-bottom: -8px; /* Match demo page */
            padding-top: 16px; /* Match demo page */
            padding-bottom: 8px; /* Match demo page */
        }
        
        .nav-top a {
            color: rgb(23, 23, 23); /* Match demo page */
            text-decoration: none;
            font-size: 16px; /* Match demo page */
            transition: color ease-in-out; /* Match demo page */
            line-height: 1;
            display: inline-block;
            font-family: 'Space Grotesk', Helvetica, Arial, sans-serif; /* Match demo page */
            font-weight: 300;
        }
        
        .nav-top a:hover {
            color: #f8f8f8; /* Match demo page */
        }
        
        /* Active state for nav items */
        .nav-item.active {
            color: #ffffff;
        }
        .nav-item.active > a {
            font-style: italic !important;
            color: #ffffff;
        }
        
        /* Dropdown styles - updated to match demo page */
        .dropdown {
            display: none;
            position: absolute;
            top: calc(100%);
            left: 0;
            background-color: rgba(159, 144, 142, 0.486);
            padding: 0 0 0 0;
            z-index: 1000;
            transition: opacity ease;
            min-width: 600px; /* Match demo page */
            opacity: 0;
            visibility: hidden;
        }
        
        /* Special case for "program" dropdown */
        .nav-item:first-child .dropdown {
            width: 600px;
        }
        
        .dropdown-container {
            display: flex;
            flex-direction: column;
            background-color: rgb(241, 61, 33);
            width: 100%;
            padding: 0;
        }
        
        .dropdown a {
            display: block;
            font-size: 16px; /* Match demo page */
            padding: 10px 10px 10px 12px; /* Match demo page */
            margin: 0;
            color: rgb(23, 23, 23);
            text-align: left;
            text-decoration: none;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-weight: 300;
            white-space: nowrap;
        }
        
        .dropdown a:first-child {
            border-top: none;
        }
        
        .dropdown a:last-child {
            border-bottom: none;
        }
        
        /* Show dropdown when active */
        .nav-item.active .dropdown {
            opacity: 1;
            visibility: visible;
            display: block;
        }
        
        .dropdown a:hover {
            background-color: rgba(243, 135, 135, 0.691);
        }
        
        /* Mobile hamburger menu - matching demo page */
        .hamburger-menu {
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding-right: 12px;
            cursor: pointer;
        }
        
        .hamburger-menu span {
            display: block;
            width: 25px;
            height: 3px;
            background-color: rgb(23, 23, 23);
            margin: 3px 0;
            transition: 0.3s;
        }
        
        /* Mobile navigation - matching demo page */
        .mobile-nav {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background-color: rgb(241, 61, 33);
            display: none;
            flex-direction: column;
            padding: 0;
            z-index: 1000;
        }
        
        .mobile-nav-item {
            position: relative;
            border-bottom: 0.5px solid rgba(23, 23, 23, 0.15) !important;
        }
        
        .mobile-nav-item > a {
            color: rgb(23, 23, 23);
            text-decoration: none;
            padding: 1vh 3vw;
            font-size: 16px;
            font-weight: 300;
            border: none !important;
            display: block !important;
            position: relative;
            padding-left: 24px !important;
            box-sizing: border-box;
        }
        
        .mobile-nav-item > a:hover {
            background-color: rgba(243, 135, 135, 0.691);
            color: #f8f8f8;
        }
        
        .mobile-nav-item.active > a {
            font-style: italic !important;
            color: #ffffff;
        }
        
        .mobile-arrow {
            position: absolute !important;
            right: 24px;
            top: 50%;
            transform: translateY(-50%);
            margin: 0 !important;
            font-size: 20px;
            transition: transform 0.3s ease;
            width: 20px;
            text-align: center;
        }
        
        .mobile-nav-item:last-child .mobile-arrow {
            display: none;
        }
        
        .mobile-nav-item.active .mobile-arrow {
            transform: translateY(-50%) rotate(180deg);
        }
        
        .mobile-dropdown {
            display: none;
            background-color: rgb(241, 61, 33);
            border-top: none !important;
            flex-direction: column;
        }
        
        .mobile-nav-item.active .mobile-dropdown {
            display: flex;
        }
        
        .mobile-dropdown a {
            color: rgb(23, 23, 23);
            text-decoration: none;
            padding: 1vh 3vw 0.5vh 6vw;
            font-size: 16px;
            font-weight: 300;
            border-bottom: 0.5px solid rgba(255, 255, 255, 0.1);
            box-sizing: border-box;
            display: flex;
            align-items: center;
            padding-left: 48px;
        }
        
        .mobile-dropdown a:hover {
            background-color: rgba(243, 135, 135, 0.691);
            color: #f8f8f8;
        }
        
        .mobile-nav.show {
            display: flex !important;
        }
        
        /* Content area - updated to match demo page */
        .content {
            padding: 120px 24px 64px 48px; /* Match demo page */
            max-width: none; /* Remove max-width constraint like demo page */
            margin: 0; /* Remove auto centering like demo page */
            position: relative;
            z-index: 2;
            flex: 1;
            width: 100%; /* Match demo page */
            box-sizing: border-box; /* Match demo page */
            padding-bottom: 80px; /* Match demo page */
        }
        
        /* Section header - updated style */
        .section-header {
            display: flex;
            align-items: center;
            margin: 40px 0 40px 0; /* Match demo page spacing */
        }
        
        .section-heading {
            font-size: 43px; /* Match demo page */
            font-weight: 400; /* Match demo page */
            margin: 0;
            line-height: 1.2;
            text-transform: uppercase;
            display: none; /* Hide the heading since we're using tabs */
        }
        
        /* Tab container */
        .tab-container {
            display: flex;
            gap: 2vw;
        }
        
        .tab {
            font-size: 24px; /* Reduced from 43px to match section headings */
            font-weight: 400; /* Match demo page weight */
            cursor: pointer;
            transition: color 0.3s ease;
            line-height: 1.2;
            position: relative;
        }
        
        .tab.active {
            color: rgb(115, 114, 114);
        }
        
        .tab.inactive {
            color: rgb(29, 29, 29);
        }
        
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -0.5vh;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: rgb(115, 114, 114);
        }
        
        /* Programs table - updated styling */
        .programs-table {
            width: 97%;
            border-collapse: collapse;
            font-family: 'Space Grotesk', Helvetica, Arial, sans-serif;
            font-weight: 300;
            position: relative;
            z-index: 2;
        }
        
        .programs-table tr {
            transition: background-color 0.2s ease;
            position: relative;
        }
        
        .programs-table tr:hover {
            background-color: rgb(115, 115, 115);
            cursor: pointer;
        }
        
        .programs-table td {
            padding: 15px 16px; /* Match demo page */
            vertical-align: top;
            border-bottom: 1px solid rgb(43, 43, 43);
        }
        
        .date-column {
            width: 15%;
            font-size: 16px; /* Match demo page */
        }
        
        .title-column {
            width: 85%;
            font-size: 18px; /* Match demo page */
        }
        
        /* No events message */
        .no-events {
            font-size: 18px; /* Match demo page */
            margin: 3vh 0;
            font-style: italic;
            color: rgb(100, 100, 100);
        }
        
        /* Dynamic rectangle container */
        .rectangle-container {
            position: fixed;
            top: 0;
            right: 0;
            width: 50%;
            height: 100vh;
            z-index: 100;
            pointer-events: none;
            overflow-y: auto;
        }
        
        .hover-rectangle {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            z-index: 1001;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: stretch; /* Changed from center to stretch for proper alignment */
            padding: 5vh 20% 5vh 20%; /* Restored original padding */
            box-sizing: border-box;
            color: white;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        
        .event-detail-view {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgb(43, 43, 43);
            padding: 5vh 20% 5vh 20%; /* 20% padding on each side = 60% content width */
            box-sizing: border-box;
            color: white;
            display: none;
            flex-direction: column;
            overflow-y: auto;
            pointer-events: auto;
            align-items: stretch; /* Changed from center to stretch for proper alignment */
        }
        
        /* Close button */
        .close-button {
            position: absolute;
            top: 2vh;
            right: 2vw;
            font-size: 1.5vw;
            color: white;
            background: none;
            border: none;
            cursor: pointer;
            z-index: 1002;
        }
        
        /* Event title styling */
        .event-title {
            text-align: center;
            margin-top: 6vh;
            margin-bottom: 3vh;
            width: 100%; /* Ensure full width within centered container */
        }
        
        .event-title h2 {
            font-size: 30px;
            margin: 0 0 0.5vh 0;
            font-weight: 500;
        }
        
        .event-title h3 {
            font-size: 1.5vw;
            margin: 0;
            font-weight: 200;
        }
        
        /* Event image styling */
        .event-image {
            width: 100%;
            /* height: auto; */
            max-height: 60vh;
            object-fit: contain;
            margin-bottom: 3vh;
        }
        
        /* Event date styling - UPDATED FOR LEFT ALIGNMENT WITH FLEX LAYOUT */
        .event-date {
            display: flex; /* Use flexbox for inline layout */
            justify-content: space-between; /* Time on left, RSVP on right */
            align-items: flex-end; /* Align items to bottom baseline */
            margin-bottom: 3vh;
            width: 100%;
        }
        
        .event-date p {
            font-size: 1.2vw;
            margin: 0 0 0.5vh 0;
            font-weight: 300;
        }
        
        /* Time container for grouping date and time */
        .time-container {
            display: flex;
            flex-direction: column;
            text-align: left;
        }
        
        /* NEW: Hover state event date - moved to bottom with same design */
        .hover-rectangle .event-date {
            order: 10;
            margin-top: auto;
            margin-bottom: 2vh;
            display: block;
            text-align: center;
            width: 100%;
            font-size: 30px;
        }

        .hover-rectangle .event-image {
            position: absolute;
            width: 60%;
            top: 235px;
            left: 50%;                    /* Move to center */
            transform: translateX(-50%);  /* Offset by half its width */
            max-height: 60vh;
            object-fit: contain;
            margin-bottom: 3vh;
        }
        
        .hover-rectangle .event-date .time-container {
            display: block;
            text-align: center;
        }
        .hover-rectangle .event-date .time-container p {
            text-align: center;
            margin: 0 0 0.5vh 0;
            display: block;
            font-size: 20px;
            font-weight: 300;
        }
        
        /* Event description */
        .event-description {
            margin-left: auto;
            margin-right: auto;
            text-align: left;
            margin-bottom: 4vh;
            width: 100%; /* Use full width within centered container */
            line-height: 1.6;
        }
        
        .event-description p {
            font-size: 15px;
            margin: 0 0 1vh 0;
        }
        
        /* RSVP button - UPDATED FOR INLINE LAYOUT WITH TIME */
        .rsvp-button {
            width: auto; /* Natural width for inline layout */
            max-width: 300px; 
            padding: 1vh 2vw;
            background-color: transparent; 
            color: white;
            border: 1px solid white; 
            font-size: 1.2vw;
            cursor: pointer;
            font-family: 'Space Grotesk', sans-serif;
            transition: all 0.3s ease;
            border-radius: 0;
            margin-bottom: 0; /* Remove bottom margin since it's inline */
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            flex-shrink: 0; /* Prevent button from shrinking */
        }
        
        .rsvp-button:hover {
            background-color: white; /* White background on hover */
            color: rgb(43, 43, 43); /* Dark text on hover to match desktop background */
        }
        
        /* Colors for rectangles */
        .rectangle-colors {
            display: none;
        }
        .hover-rectangle .rsvp-button {
            display: none; /* Hide RSVP button during hover */
        }
        
        /* Mobile popup overlay - UPDATED WITH OUTLINE */
        .mobile-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8); /* Semi-transparent overlay */
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 5vh;
            box-sizing: border-box;
        }
        
        .mobile-popup-content {
            width: 90%;
            max-width: 500px;
            max-height: 85vh;
            background-color: #8B7355; /* Brown background */
            border-radius: 0; /* No rounded corners */
            overflow-y: auto;
            position: relative;
            padding: 3vh 4vw;
            box-sizing: border-box;
            display: block;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            color: white; /* White text on brown background */
            border: 4px solid #ffffff; /* This will be overridden by JavaScript with random color */
        }
        
        /* Color accent for mobile popup - REMOVED TO ELIMINATE EXTRA LINE */
        
        .mobile-close-button {
            position: absolute;
            top: 2vh;
            right: 3vw;
            background: none;
            border: none;
            color: white; /* White color for brown background */
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 2001;
            padding: 5px;
            line-height: 1;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0;
            font-weight: 300;
        }
        
        .mobile-close-button:hover {
            background-color: rgba(255, 255, 255, 0.1); /* Subtle hover effect */
        }
        
        /* Footer - updated to match demo page */
    
        
        /* Media queries - updated for mobile */
        @media (max-width: 768px) {
            /* Hide desktop nav, show hamburger */
            .nav-top {
                display: none !important;
            }
            
            .hamburger-menu {
                display: flex !important;
            }
            
            .mobile-nav {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background-color: rgb(241, 61, 33);
                z-index: 1000;
            }
            
            .top-banner h1 {
                font-size: 28px; /* Responsive size for mobile */
            }
            
            .content {
                padding: 15vh 3vw 4vw 3vw; /* Align table left edge with title */
                padding-left: 24px; /* Match title-container padding for alignment */
            }
            
            .section-heading {
                font-size: 20px;
            }
            
            .tab {
                font-size: 20px; /* Reduced for mobile */
            }
            
            .tab-container {
                gap: 5vw;
            }
            
            .date-column {
                font-size: 16px;
            }
            
            .title-column {
                font-size: 16px;
            }
            
            .no-events {
                font-size: 16px;
            }
            
            /* Hide desktop rectangle container on mobile */
            .rectangle-container {
                display: none !important;
            }
            
            /* Mobile popup styles - RESPONSIVE UPDATES */
            .mobile-popup-overlay {
                padding: 3vh;
            }
            
            .mobile-popup-content {
                width: 90%;
                max-width: 450px;
                padding: 2.5vh 3.5vw;
                border-radius: 0;
                background-color: #1f0f07; /* Brown background */
                color: white; /* White text */
                border: 4px solid #ffffff; /* This will be overridden by JavaScript with random color */
            }
            
            .mobile-popup-content .event-title {
                text-align: center;
                margin-top: 0.5vh;
                margin-bottom: 2vh;
                border-bottom: none; /* Remove separator line */
                padding-bottom: 1.5vh;
            }
            
            .mobile-popup-content .event-title h2 {
                font-size: 5.5vw;
                margin: 0 0 0.5vh 0;
                font-weight: 400;
                line-height: 1.2;
                color: white; /* White color */
                text-transform: none; /* Remove uppercase */
                letter-spacing: 0.02em;
            }
            
            .mobile-popup-content .event-title h3 {
                font-size: 4vw;
                margin: 0;
                font-weight: 300;
                line-height: 1.2;
                color: rgba(255, 255, 255, 0.8); /* Slightly dimmed white for subtitle */
                font-style: italic;
            }
            
            .mobile-popup-content .event-image {
                width: 100%;
                height: auto;
                max-height: 25vh;
                object-fit: contain;
                margin-bottom: 2vh;
                display: block;
                border-radius: 0;
                border: none; /* Remove border around image */
            }
            
            .mobile-popup-content .event-date {
                text-align: center;
                margin-bottom: 2vh;
                padding: 1vh 0;
                background-color: transparent; /* Remove background */
                display: block; /* Ensure block layout for mobile */
            }
            
            .mobile-popup-content .event-date p {
                font-size: 3.5vw;
                margin: 0 0 0.3vh 0;
                font-weight: 400;
                line-height: 1.3;
                color: white; /* White color */
                display: block; /* Each paragraph on its own line */
            }
            
            .mobile-popup-content .event-description {
                text-align: left;
                margin-bottom: 2vh;
                line-height: 1.7;
                padding: 1vh 0;
            }
            
            .mobile-popup-content .event-description p {
                font-size: 3vw;
                line-height: 1.7;
                margin: 0;
                color: white; /* White color */
                font-weight: 300;
            }
            
            .mobile-popup-content .rsvp-button {
                font-size: 3.5vw;
                padding: 2vh 4vw;
                width: 100%;
                background-color: transparent; /* Transparent background */
                color: white;
                border: 1px solid white; /* White border */
                cursor: pointer;
                font-family: 'Space Grotesk', sans-serif;
                transition: all 0.3s ease;
                border-radius: 0;
                margin-top: 2vh;
                font-weight: 400;
                text-transform: uppercase;
                letter-spacing: 0.1em;
                margin-left: auto; /* Center the button */
                margin-right: auto; /* Center the button */
                display: block; /* Ensure block display for centering */
            }
            
            .mobile-popup-content .rsvp-button:hover {
                background-color: white; /* White background on hover */
                color: #2b1a06; /* Brown text on hover */
            }
            
            .mobile-close-button {
                font-size: 4vw;
                top: 1.5vh;
                right: 3vw;
                padding: 0.5vh 1vh;
                position: absolute !important;
                border-radius: 0;
                background: none;
                width: auto;
                height: auto;
                color: white; /* White color for brown background */
                font-weight: 300;
            }
            
            .mobile-close-button:hover {
                background-color: rgba(255, 255, 255, 0.1); /* Subtle hover effect */
            }
        }
        
        /* Auto-switch to desktop when screen is larger than 768px */
        @media (min-width: 769px) {
            .nav-top {
                display: flex !important;
            }
            
            .hamburger-menu {
                display: none !important;
            }
            
            .mobile-nav {
                display: none !important;
            }
            
            /* Make sure mobile popup is completely hidden on desktop */
            .mobile-popup-overlay {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <!-- Top red banner with title and navigation -->
    <div class="top-banner">
        <div class="title-container">
            <h1 onclick="goToHomepage()" style="cursor: pointer;">initial research</h1>
        </div>
        <nav class="nav-top">
            <div class="nav-item">
                <a href="#">program</a>
                <div class="dropdown">
                    <div class="dropdown-container">
                        <a href="calendar.html">calendar</a>
                        <a href="fellowship.html">fellowship</a>
                        <a href="communityhours.html">community hours</a>
                        <a href="seasonaldinner.html">seasonal dinner</a>
                        <a href="exhibition.html">exhibitions</a>
                    </div>
                </div>
            </div>
            
            <div class="nav-item">
                <a href="#">about</a>
                <div class="dropdown">
                    <div class="dropdown-container">
                        <a href="../about/mission.html">mission</a>
                        <a href="../about/vision.html">vision</a>
                        <a href="../about/team.html">team</a>
                        <a href="../about/contact.html">contact</a>
                    </div>
                </div>
            </div>
            
            <div class="nav-item">
                <a href="supportus.html">support us</a>
            </div>
        </nav>
        
        <!-- Hamburger menu for mobile -->
        <div class="hamburger-menu" onclick="toggleMobileNav()">
            <span></span>
            <span></span>
            <span></span>
        </div>
        
        <!-- Mobile navigation menu -->
        <div class="mobile-nav" id="mobileNav">
            <div class="mobile-nav-item">
                <a href="#" onclick="toggleMobileDropdown(event, this)">
                    program
                    <span class="mobile-arrow">ᵥ</span>
                </a>
                <div class="mobile-dropdown">
                    <a href="calendar.html">calendar</a>
                    <a href="fellowship.html">fellowship</a>
                    <a href="communityhours.html">community hours</a>
                    <a href="seasonaldinner.html">seasonal dinner</a>
                    <a href="exhibition.html">exhibitions</a>
                </div>
            </div>
            
            <div class="mobile-nav-item">
                <a href="#" onclick="toggleMobileDropdown(event, this)">
                    about
                    <span class="mobile-arrow">ᵥ</span>
                </a>
                <div class="mobile-dropdown">
                    <a href="../about/mission.html">mission</a>
                    <a href="../about/vision.html">vision</a>
                    <a href="../about/team.html">team</a>
                    <a href="../about/contact.html">contact</a>
                </div>
            </div>
            
            <div class="mobile-nav-item">
                <a href="../supportus/supportus.html">support us</a>
            </div>
        </div>
    </div>
    
    <!-- Store colors in data attributes -->
    <div class="rectangle-colors" 
         data-colors='["rgb(51, 25, 0)",  "#3b2b1d", "rgb(70, 0, 0)",  "#3b2b1d", "rgb(39, 39, 39)", "rgb(59, 40, 40)"]'>
    </div>
    
    <!-- Rectangle container for hover effect and detailed view -->
    <div class="rectangle-container">
        <div class="hover-rectangle" id="rectangle-1">
            <div class="event-title">
                <h2>The Girl with a Pistol</h2>
                <h3>screening</h3>
            </div>
            <img src="img/upcomings/1.jpg" alt="The Girl with a Pistol" class="event-image">
            <div class="event-date">
                <div class="time-container">
                    <p>March 29th Saturday 2025</p>
                    <p>2pm to 6pm</p>
                </div>
                <button class="rsvp-button">RSVP</button>
            </div>
        </div>
        
        <div class="event-detail-view" id="event-details">
            <button class="close-button" id="close-detail">✕</button>
            <div class="event-title">
                <h2 id="detail-title">Event Title</h2>
                <h3 id="detail-subtitle">subtitle</h3>
            </div>
            <img id="detail-image" src="img/upcomings/1.jpg" alt="Event Image" class="event-image">
            <div class="event-date">
                <div class="time-container">
                    <p id="detail-date">Date</p>
                    <p id="detail-time">Time</p>
                </div>
                <button class="rsvp-button" id="rsvp-button">RSVP</button>
            </div>
            <div class="event-description">
                <p id="detail-description">Event description will appear here.</p>
            </div>
        </div>
    </div>
    
    <!-- Mobile popup overlay -->
    <div class="mobile-popup-overlay" id="mobile-popup-overlay">
        <div class="mobile-popup-content" id="mobile-popup-content">
            <button class="mobile-close-button" id="mobile-close-button">✕</button>
            <div class="event-title">
                <h2 id="mobile-detail-title">Event Title</h2>
                <h3 id="mobile-detail-subtitle">subtitle</h3>
            </div>
            <img id="mobile-detail-image" src="img/upcomings/1.jpg" alt="Event Image" class="event-image">
            <div class="event-date">
                <p id="mobile-detail-date">Date</p>
                <p id="mobile-detail-time">Time</p>
            </div>
            <div class="event-description">
                <p id="mobile-detail-description">Event description will appear here.</p>
            </div>
            <button class="rsvp-button" id="mobile-rsvp-button">RSVP</button>
        </div>
    </div>
    
    <!-- Content area with toggle switch -->
    <div class="content">
        <div class="section-header">
            <h2 class="section-heading" id="section-title">upcoming</h2>
            <div class="tab-container">
                <div class="tab active" id="upcoming-tab">Upcoming</div>
                <div class="tab inactive" id="past-tab">Past</div>
            </div>
        </div>
        
        <div id="upcoming-container">
            <table class="programs-table" id="upcoming-table">
                <tbody>
                    <!-- Table will be populated by JavaScript -->
                </tbody>
            </table>
            <p class="no-events" id="no-upcoming" style="display: none;">No upcoming events scheduled.</p>
        </div>
        
        <div id="past-container" style="display: none;">
            <table class="programs-table" id="past-table">
                <tbody>
                    <!-- Table will be populated by JavaScript -->
                </tbody>
            </table>
            <p class="no-events" id="no-past" style="display: none;">No past events to display.</p>
        </div>
    </div>
    
    <!-- Footer matching demo page style -->
    <footer style="
    margin-top: auto;
    width: 100%;
    background-color: rgb(180, 180, 180);
    padding: 10px 0;
    text-align: center;
    font-family: 'Space Grotesk', Helvetica, Arial, sans-serif;
    font-size: 16px;
    font-weight: 300;
    color: rgb(23, 23, 23);
    z-index: 1;
">
    123 Gallery Street, New York, NY 10001
</footer>
    
    <script>
          function goToHomepage() {
            window.location.href = '../index.html';
        }
        // Mobile navigation functions - matching demo page
        function toggleMobileNav() {
            const mobileNav = document.getElementById('mobileNav');
            
            if (mobileNav.style.display === 'flex' || mobileNav.classList.contains('show')) {
                mobileNav.style.display = 'none';
                mobileNav.classList.remove('show');
                // Close all mobile dropdowns when closing nav
                const allMobileNavItems = document.querySelectorAll('.mobile-nav-item');
                allMobileNavItems.forEach(item => {
                    item.classList.remove('active');
                });
            } else {
                mobileNav.style.display = 'flex';
                mobileNav.classList.add('show');
            }
        }
        
        // Mobile dropdown toggle
        function toggleMobileDropdown(event, element) {
            event.preventDefault();
            const navItem = element.parentElement;
            
            // Check if this nav item has a dropdown
            const dropdown = navItem.querySelector('.mobile-dropdown');
            if (!dropdown) {
                // If no dropdown, it's a regular link
                return;
            }
            
            // Close all other mobile dropdowns
            const allMobileNavItems = document.querySelectorAll('.mobile-nav-item');
            allMobileNavItems.forEach(item => {
                if (item !== navItem) {
                    item.classList.remove('active');
                }
            });
            
            // Toggle current dropdown
            navItem.classList.toggle('active');
        }

        // FIXED: Add event data with proper date creation for NYC timezone
        const events = [
            { 
                id: 1, 
                // Create date in NYC timezone by specifying the date string with timezone
                date: new Date('2025-05-20T23:59:59.999-04:00'), // May 16, 2025 end of day in EDT
                title: "Summer Exhibition Opening",
                displayDate: "05.20.25",
                subtitle: "exhibition",
                image: "img/upcomings/1.jpg",
                timeDisplay: "6pm to 9pm",
                description: "Join us for the opening reception of our Summer Exhibition featuring works by emerging artists exploring themes of ecology, community, and speculative futures. The exhibition brings together paintings, sculptures, video installations, and interactive works that envision alternative ways of being in relation to our environment and each other. Refreshments will be served.",
                rsvpLink: "https://example.com/rsvp/summer-exhibition"
            },
            { 
                id: 2, 
                date: new Date('2025-05-25T23:59:59.999-04:00'), 
                title: "Artist Talk: Maria Garcia",
                displayDate: "05.25.25",
                subtitle: "lecture",
                image: "img/upcomings/2.jpg",
                timeDisplay: "7pm to 8:30pm",
                description: "Acclaimed artist Maria Garcia discusses her recent work examining the intersection of digital technology and traditional craft practices. Garcia will present her methodology and research process, followed by a Q&A session. This talk is presented in collaboration with the Digital Arts Foundation and is part of our ongoing series on contemporary art practices.",
                rsvpLink: "https://example.com/rsvp/maria-garcia-talk"
            },
            { 
                id: 3, 
                date: new Date('2025-07-22T23:59:59.999-04:00'), 
                title: "Experimental Film Night",
                displayDate: "07.22.25",
                subtitle: "screening",
                image: "img/upcomings/1.jpg",
                timeDisplay: "8pm to 10pm",
                description: "A curated selection of experimental short films by international filmmakers pushing the boundaries of the medium. The program includes works that explore non-narrative structures, alternative production techniques, and expanded cinema practices. Each screening will be followed by a brief discussion led by film curator Alex Wong.",
                rsvpLink: "https://example.com/rsvp/experimental-film"
            },
            { 
                id: 4, 
                date: new Date('2025-04-19T23:59:59.999-04:00'), 
                title: "Poetry & Performance Workshop",
                displayDate: "04.19.25",
                subtitle: "workshop",
                image: "img/upcomings/1.jpg",
                timeDisplay: "1pm to 4pm",
                description: "This participatory workshop led by poet and performer James Rivera explores the relationship between written text and embodied expression. Participants will develop short poetic texts and experiment with different approaches to performing them. No prior experience with poetry or performance is necessary. Limited to 15 participants.",
                rsvpLink: "https://example.com/rsvp/poetry-workshop"
            },
            { 
                id: 5, 
                date: new Date('2025-03-29T23:59:59.999-04:00'), 
                title: "The Girl with a Pistol",
                displayDate: "03.29.25",
                subtitle: "screening",
                image: "img/upcomings/5.jpg",
                timeDisplay: "2pm to 6pm",
                description: "A special screening of Mario Monicelli's 1968 film 'The Girl with a Pistol' (La ragazza con la pistola), starring Monica Vitti. This dark comedy follows a Sicilian woman who travels to England to seek revenge on the man who ruined her honor. The screening will be introduced by film historian Dr. Elena Rossi, who will discuss the film's significance in Italian cinema history.",
                rsvpLink: "https://example.com/rsvp/girl-with-pistol"
            },
            { 
                id: 6, 
                date: new Date('2025-02-23T23:59:59.999-05:00'), // Feb is EST
                title: "Heavy Traffic 5: readings",
                displayDate: "02.23.25",
                subtitle: "readings",
                image: "img/upcomings/6.jpg",
                timeDisplay: "2pm to 6pm",
                description: "The fifth installment of our popular reading series featuring new works by emerging writers from our community. Each reader will present original writing created over the past six months. This edition focuses particularly on experimental prose and cross-genre works. Light refreshments will be provided.",
                rsvpLink: "https://example.com/rsvp/heavy-traffic-readings-feb"
            },
            { 
                id: 7, 
                date: new Date('2025-01-24T23:59:59.999-05:00'), // Jan is EST
                title: "Heavy Traffic 5: readings",
                displayDate: "01.24.25",
                subtitle: "readings",
                image: "img/upcomings/7.jpg",
                timeDisplay: "6pm to 8pm",
                description: "Join us for an evening of readings from participants in our winter writing workshop. Writers will share works-in-progress and newly completed pieces across genres including poetry, fiction, and creative non-fiction. This event celebrates the collaborative spirit of our writing community and offers insight into diverse writing practices.",
                rsvpLink: "https://example.com/rsvp/heavy-traffic-readings-jan"
            },
            { 
                id: 8, 
                date: new Date('2025-01-23T23:59:59.999-05:00'), // Jan is EST
                title: "Alex Zhang Hungtai & Will August Park",
                displayDate: "01.23.25",
                subtitle: "performance",
                image: "img/upcomings/8.jpg",
                timeDisplay: "7pm to 9pm",
                description: "An evening of experimental music featuring composer and saxophonist Alex Zhang Hungtai performing alongside percussionist Will August Park. Their collaborative improvisation draws on drone, free jazz, and noise traditions to create immersive sonic landscapes. Limited seating available - early arrival recommended.",
                rsvpLink: "https://example.com/rsvp/experimental-music"
            },
            { 
                id: 9, 
                date: new Date('2025-01-19T23:59:59.999-05:00'), // Jan is EST
                title: "Silence",
                displayDate: "01.19.25",
                subtitle: "film screening",
                image: "img/upcomings/9.jpg",
                timeDisplay: "3pm to 5pm",
                description: "A screening of Martin Scorsese's 2016 film 'Silence,' based on the novel by Shūsaku Endō. Set in the 17th century, the film follows two Portuguese Jesuit priests who travel to Japan to locate their missing mentor and spread Catholicism. The screening will be followed by a discussion on the film's themes of faith, doubt, and cultural encounter.",
                rsvpLink: "https://example.com/rsvp/silence-screening"
            },
            { 
                id: 10, 
                date: new Date('2025-01-16T23:59:59.999-05:00'), // Jan is EST
                title: "Bonzo Night 2",
                displayDate: "01.16.25",
                subtitle: "performance",
                image: "img/upcomings/10.jpg",
                timeDisplay: "8pm to 11pm",
                description: "The second edition of our experimental performance night featuring interdisciplinary artists working at the intersection of sound, movement, and visual art. This edition includes performances by the Bonzo Collective, a group known for their absurdist approach to live art, as well as guest artists exploring similar terrain. Contains adult content.",
                rsvpLink: "https://example.com/rsvp/bonzo-night-2"
            },
            { 
                id: 11, 
                date: new Date('2024-11-05T23:59:59.999-05:00'), // Nov is EST
                title: "The U.S. Election",
                displayDate: "11.05.24",
                subtitle: "public viewing",
                image: "img/past/1.jpg",
                timeDisplay: "5pm to 10pm",
                description: "A public viewing of the 2024 U.S. Presidential Election results. Join us to watch the returns in a communal setting with refreshments provided. Political scientists from the local university will be present to offer context and analysis throughout the evening.",
                link: "https://example.com/us-election-2024" // Example link
            },
            { 
                id: 12, 
                date: new Date('2024-11-02T23:59:59.999-04:00'), // Nov 2 is still EDT
                title: "Keller Easterling: NON_1",
                displayDate: "11.02.24",
                subtitle: "lecture",
                image: "img/past/2.jpg",
                timeDisplay: "4pm to 6pm",
                description: "Acclaimed architect and theorist Keller Easterling presents her latest research project, NON_1, which explores alternative approaches to spatial organization and infrastructure design. Easterling is known for her work examining how spatial arrangements express and reinforce power structures in society.",
                link: "https://example.com/keller-easterling-non1" // Example link
            },
            { 
                id: 13, 
                date: new Date('2024-10-27T23:59:59.999-04:00'), // Oct is EDT
                title: "Heavy Traffic 5",
                displayDate: "10.27.24",
                subtitle: "exhibition opening",
                image: "img/past/3.jpg",
                timeDisplay: "6pm to 9pm",
                description: "The opening reception for Heavy Traffic 5, a group exhibition featuring works by participants in our annual fellowship program. The exhibition showcases diverse approaches to contemporary art practice including painting, sculpture, video, and performance. Curated by our 2024 curatorial fellow, Lisa Chen.",
                link: "https://example.com/heavy-traffic-5" // Example link
            },
            { 
                id: 14, 
                date: new Date('2024-09-29T23:59:59.999-04:00'), // Sep is EDT
                title: "Seth Price: Before Writing",
                displayDate: "09.29.24",
                subtitle: "book launch",
                image: "img/past/4.jpg",
                timeDisplay: "7pm to 9pm",
                description: "Join us for the launch of Seth Price's new book 'Before Writing,' which collects the artist's essays and theoretical writings from the past decade. Price will read selections from the book and discuss his approach to writing as an extension of his visual art practice. Books will be available for purchase and signing.",
                link: "https://example.com/seth-price-before-writing" // Example link
            }
        ];
        
        // Function to setup click for detailed view
        function setupDetailView() {
            const upcomingRows = document.querySelectorAll('#upcoming-table tr');
            const pastRows = document.querySelectorAll('#past-table tr');
            const detailView = document.getElementById('event-details');
            const mobilePopup = document.getElementById('mobile-popup-overlay');
            const mobilePopupContent = document.getElementById('mobile-popup-content');
            const closeButton = document.getElementById('close-detail');
            const mobileCloseButton = document.getElementById('mobile-close-button');
            
            // Check if we're on mobile
            function isMobile() {
                return window.innerWidth <= 768;
            }
            
            // Function to show event details
            function showEventDetails(event) {
                // Get a random color from the array
                const colorsData = document.querySelector('.rectangle-colors').getAttribute('data-colors');
                const colors = JSON.parse(colorsData);
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                
                // Format the date
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                const formattedDate = event.date.toLocaleDateString('en-US', options);
                
                if (isMobile()) {
                    // Mobile popup
                    const mobileDetailTitle = document.getElementById('mobile-detail-title');
                    const mobileDetailSubtitle = document.getElementById('mobile-detail-subtitle');
                    const mobileDetailImage = document.getElementById('mobile-detail-image');
                    const mobileDetailDate = document.getElementById('mobile-detail-date');
                    const mobileDetailTime = document.getElementById('mobile-detail-time');
                    const mobileDetailDescription = document.getElementById('mobile-detail-description');
                    const mobileRsvpButton = document.getElementById('mobile-rsvp-button');
                    
                    mobileDetailTitle.textContent = event.title;
                    mobileDetailSubtitle.textContent = event.subtitle;
                    mobileDetailImage.src = event.image;
                    mobileDetailImage.alt = event.title;
                    mobileDetailDate.textContent = formattedDate;
                    mobileDetailTime.textContent = event.timeDisplay;
                    mobileDetailDescription.textContent = event.description;
                    
                    // Apply random color to the popup border
                    mobilePopupContent.style.borderColor = randomColor;
                    
                    // Show mobile popup with flex display for centering
                    mobilePopup.style.display = 'flex';
                    
                    // RSVP button event listener (remove any existing ones first)
                    mobileRsvpButton.replaceWith(mobileRsvpButton.cloneNode(true));
                    const newMobileRsvpButton = document.getElementById('mobile-rsvp-button');
                    newMobileRsvpButton.addEventListener('click', function() {
                        if (event.rsvpLink) {
                            window.open(event.rsvpLink, '_blank');
                        } else {
                            alert('Thank you for your RSVP to ' + event.title + '! We\'ll send you more details via email.');
                        }
                    });
                } else {
                    // Desktop detail view
                    const detailTitle = document.getElementById('detail-title');
                    const detailSubtitle = document.getElementById('detail-subtitle');
                    const detailImage = document.getElementById('detail-image');
                    const detailDate = document.getElementById('detail-date');
                    const detailTime = document.getElementById('detail-time');
                    const detailDescription = document.getElementById('detail-description');
                    const rsvpButton = document.getElementById('rsvp-button');
                    
                    // Immediately hide the hover effect
                    document.getElementById('rectangle-1').style.opacity = '0';
                    
                    detailTitle.textContent = event.title;
                    detailSubtitle.textContent = event.subtitle;
                    detailImage.src = event.image;
                    detailImage.alt = event.title;
                    detailDate.textContent = formattedDate;
                    detailTime.textContent = event.timeDisplay;
                    detailDescription.textContent = event.description;
                    detailView.style.backgroundColor = randomColor;
                    
                    // Show the detail view
                    setTimeout(function() {
                        detailView.style.display = 'flex';
                    }, 10);
                    
                    // RSVP button event listener (remove any existing ones first)
                    rsvpButton.replaceWith(rsvpButton.cloneNode(true));
                    const newRsvpButton = document.getElementById('rsvp-button');
                    newRsvpButton.addEventListener('click', function() {
                        if (event.rsvpLink) {
                            window.open(event.rsvpLink, '_blank');
                        } else {
                            alert('Thank you for your RSVP to ' + event.title + '! We\'ll send you more details via email.');
                        }
                    });
                }
            }
            
            // Set up click event for each upcoming event row
            upcomingRows.forEach(row => {
                const eventId = row.getAttribute('data-rectangle');
                const event = events.find(e => e.id == eventId);
                
                if (event) {
                    row.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        showEventDetails(event);
                    });
                }
            });
            
            // Set up click event for each past event row (redirect to external link)
            pastRows.forEach(row => {
                const eventId = row.getAttribute('data-rectangle');
                const event = events.find(e => e.id == eventId);
                
                if (event && event.link) {
                    row.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        window.open(event.link, '_blank');
                    });
                    
                    row.style.cursor = 'pointer';
                    row.setAttribute('title', 'Click to view more details');
                }
            });
            
            // Close button event listeners
            closeButton.addEventListener('click', function() {
                detailView.style.display = 'none';
                document.getElementById('rectangle-1').style.opacity = '0';
            });
            
            // Close mobile popup when clicking close button
            mobileCloseButton.addEventListener('click', function() {
                mobilePopup.style.display = 'none';
            });
            
            // Close mobile popup when clicking on overlay background
            mobilePopup.addEventListener('click', function(e) {
                if (e.target === mobilePopup) {
                    mobilePopup.style.display = 'none';
                }
            });
        }
        
        // FIXED: Simplified function to get current date and time in New York timezone
        function getCurrentNYDateTime() {
            // Get current date in New York timezone
            const now = new Date();
            return new Date(now.toLocaleString("en-US", {timeZone: "America/New_York"}));
        }
        
        // Function to initialize the page
        function initializeCalendar() {
            const nowNY = getCurrentNYDateTime(); // Get current datetime in NY timezone
            
            // Separate events into upcoming and past using direct comparison
            const upcomingEvents = events.filter(event => {
                return nowNY <= event.date; // Event is upcoming if current time is before event end
            });
            
            const pastEvents = events.filter(event => {
                return nowNY > event.date; // Event is past if current time is after event end
            }).sort((a, b) => b.date - a.date); // Sort past events by most recent first
            
            // Populate the tables
            populateEventTable('upcoming-table', upcomingEvents);
            populateEventTable('past-table', pastEvents);
            
            // Show "No events" message if needed
            document.getElementById('no-upcoming').style.display = upcomingEvents.length === 0 ? 'block' : 'none';
            document.getElementById('no-past').style.display = pastEvents.length === 0 ? 'block' : 'none';
            
            // Add event listeners for tab switching
            const upcomingTab = document.getElementById('upcoming-tab');
            const pastTab = document.getElementById('past-tab');
            const upcomingContainer = document.getElementById('upcoming-container');
            const pastContainer = document.getElementById('past-container');
            const sectionTitle = document.getElementById('section-title');
            
            // Function to show upcoming events
            function showUpcoming() {
                upcomingContainer.style.display = 'block';
                pastContainer.style.display = 'none';
                upcomingTab.classList.add('active');
                upcomingTab.classList.remove('inactive');
                pastTab.classList.add('inactive');
                pastTab.classList.remove('active');
                sectionTitle.textContent = 'UPCOMING';
            }
            
            // Function to show past events
            function showPast() {
                upcomingContainer.style.display = 'none';
                pastContainer.style.display = 'block';
                upcomingTab.classList.add('inactive');
                upcomingTab.classList.remove('active');
                pastTab.classList.add('active');
                pastTab.classList.remove('inactive');
                sectionTitle.textContent = 'PAST';
            }
            
            // Click handlers for tabs
            upcomingTab.addEventListener('click', showUpcoming);
            pastTab.addEventListener('click', showPast);
            
            // Set up hover effects for event rows
            setupHoverEffects();
            
            // Set up click for detailed view
            setupDetailView();
        }
        
        // Function to populate event tables
        function populateEventTable(tableId, eventsList) {
            const tableBody = document.getElementById(tableId).querySelector('tbody');
            tableBody.innerHTML = '';
            
            eventsList.forEach(event => {
                const row = document.createElement('tr');
                row.setAttribute('data-rectangle', event.id);
                
                const dateCell = document.createElement('td');
                dateCell.className = 'date-column';
                dateCell.textContent = event.displayDate;
                
                const titleCell = document.createElement('td');
                titleCell.className = 'title-column';
                titleCell.textContent = event.title;
                
                row.appendChild(dateCell);
                row.appendChild(titleCell);
                tableBody.appendChild(row);
            });
        }
        
        // Function to setup hover effects
        function setupHoverEffects() {
            const tableRows = document.querySelectorAll('.programs-table tr');
            const rectangle = document.getElementById('rectangle-1');
            
            // Get colors from data attribute
            const colorsData = document.querySelector('.rectangle-colors').getAttribute('data-colors');
            const colors = JSON.parse(colorsData);
            
            tableRows.forEach(row => {
                const eventId = row.getAttribute('data-rectangle');
                const event = events.find(e => e.id == eventId);
                
                if (event) {
                    row.addEventListener('mouseenter', function() {
                        // Only show hover effect on desktop and if detail view is not displayed
                        if (window.innerWidth > 768 && document.getElementById('event-details').style.display !== 'flex') {
                            // Set event details
                            const eventTitle = rectangle.querySelector('.event-title h2');
                            const eventSubtitle = rectangle.querySelector('.event-title h3');
                            const eventImage = rectangle.querySelector('.event-image');
                            const eventDateElement = rectangle.querySelector('.event-date p:first-child');
                            const eventTimeElement = rectangle.querySelector('.event-date p:last-child');
                            
                            eventTitle.textContent = event.title;
                            eventSubtitle.textContent = event.subtitle;
                            eventImage.src = event.image;
                            eventImage.alt = event.title;
                            
                            // Format the date
                            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                            eventDateElement.textContent = event.date.toLocaleDateString('en-US', options);
                            eventTimeElement.textContent = event.timeDisplay;
                            
                            // Get a random color from the array
                            const randomColor = colors[Math.floor(Math.random() * colors.length)];
                            
                            // Set the background color of the rectangle
                            rectangle.style.backgroundColor = randomColor;
                            
                            // Show the rectangle
                            rectangle.style.opacity = '1';
                        }
                    });
                    
                    row.addEventListener('mouseleave', function() {
                        // Only hide hover effect on desktop and if detail view is not displayed
                        if (window.innerWidth > 768 && document.getElementById('event-details').style.display !== 'flex') {
                            // Hide the rectangle when not hovering
                            rectangle.style.opacity = '0';
                        }
                    });
                }
            });
        }
        
        // Automatic check for past events - check every hour
        function setupAutomaticEventCheck() {
            // Check once at page load
            initializeCalendar();
            
            // Set up automatic checks every hour to catch events that end
            setInterval(function() {
                initializeCalendar();
            }, 60 * 60 * 1000); // Check every hour (60 minutes * 60 seconds * 1000 ms)
        }
        
        // Auto-handle screen resize
        window.addEventListener('resize', function() {
            const mobileNav = document.getElementById('mobileNav');
            const allMobileNavItems = document.querySelectorAll('.mobile-nav-item');
            
            // If resizing to desktop width, close mobile nav
            if (window.innerWidth > 768) {
                mobileNav.style.display = 'none';
                mobileNav.classList.remove('show');
                allMobileNavItems.forEach(item => {
                    item.classList.remove('active');
                });
            }
        });
        
        // Initialize when the DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            // Desktop dropdown toggle functionality
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                const link = item.querySelector('a');
                const dropdown = item.querySelector('.dropdown');
                
                if (dropdown) {
                    // Handle dropdown toggle for nav items with dropdowns
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        
                        // Close all other dropdowns
                        navItems.forEach(otherItem => {
                            if (otherItem !== item) {
                                otherItem.classList.remove('active');
                            }
                        });
                        
                        // Toggle current dropdown
                        item.classList.toggle('active');
                    });
                } else {
                    // Handle direct navigation for items without dropdowns
                    link.addEventListener('click', function(e) {
                        // Don't prevent default for direct navigation
                        // The href will handle the navigation
                        
                        // Close all dropdowns when clicking on direct links
                        navItems.forEach(otherItem => {
                            otherItem.classList.remove('active');
                        });
                    });
                }
            });
            
            // Close dropdowns when clicking outside
            document.addEventListener('click', function(e) {
                const isNavClick = e.target.closest('.nav-item');
                const isMobileNavClick = e.target.closest('.mobile-nav');
                
                if (!isNavClick && !isMobileNavClick) {
                    navItems.forEach(item => {
                        item.classList.remove('active');
                    });
                }
            });
            
            setupAutomaticEventCheck();
        });
        
        // Close mobile nav when clicking outside
        document.addEventListener('click', function(e) {
            const mobileNav = document.getElementById('mobileNav');
            const hamburger = document.querySelector('.hamburger-menu');
            
            if (!hamburger.contains(e.target) && !mobileNav.contains(e.target)) {
                mobileNav.style.display = 'none';
                mobileNav.classList.remove('show');
                // Close all mobile dropdowns when clicking outside
                const allMobileNavItems = document.querySelectorAll('.mobile-nav-item');
                allMobileNavItems.forEach(item => {
                    item.classList.remove('active');
                });
            }
        });
    </script>
    
</body>
</html>